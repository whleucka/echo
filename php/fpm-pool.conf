[www]
; Dynamic pool: scale workers based on demand.
; Sized for 4GB VPS — ~20 workers at ~50MB each ≈ 1-2GB
pm = dynamic
pm.max_children = 20
pm.start_servers = 5
pm.min_spare_servers = 3
pm.max_spare_servers = 8

; Recycle workers after 500 requests (prevents memory leaks on constrained VPS)
pm.max_requests = 500

; Kill runaway workers after 30s
request_terminate_timeout = 30s

; Slow request log (helps find bottlenecks)
slowlog = /proc/self/fd/2
request_slowlog_timeout = 5s
