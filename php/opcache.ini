[opcache]
; Enable OPcache
opcache.enable=1
opcache.enable_cli=0

; Memory: 128MB for compiled scripts, 8MB for interned strings
; ~2,600 PHP files need ~80-130MB â€” 128MB provides headroom
opcache.memory_consumption=128
opcache.interned_strings_buffer=8

; Allow caching up to 4099 files (OPcache rounds to next prime bucket)
opcache.max_accelerated_files=4099

; Production: don't check file timestamps (restart FPM to pick up changes)
; Override in local.ini for development
opcache.validate_timestamps=0
opcache.revalidate_freq=0

; Optimize file_exists/is_file calls via cache
opcache.enable_file_override=1

; Don't save comments (saves memory; set to 1 if using annotations at runtime)
opcache.save_comments=1

; JIT: tracing mode with 64MB buffer
opcache.jit=tracing
opcache.jit_buffer_size=64M
