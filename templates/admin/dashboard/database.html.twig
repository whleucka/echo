<div class="card shad border-0 h-100">
  <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
    <span><i class="bi bi-database me-2"></i>Database Stats</span>
    <button class="btn btn-sm btn-outline-secondary"
      hx-get="/admin/dashboard/database"
      hx-swap="outerHTML"
      hx-target="closest .card">
      <i class="bi bi-arrow-clockwise"></i>
    </button>
  </div>
  <div class="card-body">
    <div class="row g-3 mb-3">
      <div class="col-4 text-center">
        <div class="small text-muted">Tables</div>
        <strong class="fs-4">{{ stats.table_count }}</strong>
      </div>
      <div class="col-4 text-center">
        <div class="small text-muted">Rows</div>
        <strong class="fs-4">{{ stats.total_rows }}</strong>
      </div>
      <div class="col-4 text-center">
        <div class="small text-muted">Size</div>
        <strong class="fs-4">{{ stats.total_size }}</strong>
      </div>
    </div>

    {% if stats.tables|length > 0 %}
    <div class="table-responsive" style="max-height: 200px; overflow-y: auto;">
      <table class="table table-sm table-hover mb-0">
        <thead class="table-light sticky-top">
          <tr>
            <th>Table</th>
            <th class="text-end">Rows</th>
            <th class="text-end">Size</th>
          </tr>
        </thead>
        <tbody>
          {% for table in stats.tables %}
          <tr>
            <td class="text-truncate" style="max-width: 150px;">{{ table.table_name }}</td>
            <td class="text-end">{{ table.table_rows|number_format }}</td>
            <td class="text-end">{{ (table.data_size_mb + table.index_size_mb)|number_format(2) }} MB</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}
  </div>
</div>
