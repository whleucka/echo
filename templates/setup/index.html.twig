{% extends "layout/base.html.twig" %}

{% block title %}{{ parent() }} - Setup{% endblock %}

{% block content %}
    <section id="setup" class="d-flex align-items-center justify-content-center h-100">
        <form method="POST" hx-post="{{ uri('setup.post') }}" hx-swap="outerHTML" hx-target="#setup" hx-select="#setup">
            {{ csrf()|raw }}
            <h1>ECHO Setup</h1>
            <hr>
            {% include "components/flash.html.twig" %}
            <h5 class="text-muted mb-3"><u>Application</u></h5>
            <div class="row mb-3">
                <label for="app-name" class="col-sm-4 col-form-label">Name</label>
                <div class="col-sm-8">
                    <input type="input" class="form-control {% if validation_errors.app_name is defined %}is-invalid{% endif %}" id="app-name" name="app_name" required>
                    {% include 'components/validation.html.twig' with {'validate': 'app_name'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="app-url" class="col-sm-4 col-form-label">URL</label>
                <div class="col-sm-8">
                    <input type="url" value="http://0.0.0.0" class="form-control {% if validation_errors.app_url is defined %}is-invalid{% endif %}" id="app-url" name="app_url" required>
                    {% include 'components/validation.html.twig' with {'validate': 'app_url'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="app-debug" class="col-sm-4 col-form-label">Debug</label>
                <div class="col-sm-8">
                    <select class="form-select" required>
                        <option value="true" selected>Enabled</option>
                        <option value="false">Disabled</option>
                    </select>
                    {% include 'components/validation.html.twig' with {'validate': 'app_url'} %}
                </div>
            </div>
            <h5 class="text-muted mb-3"><u>Database</u></h5>
            <div class="row mb-3">
                <label for="db-name" class="col-sm-4 col-form-label">Name</label>
                <div class="col-sm-8">
                    <input type="input" class="form-control {% if validation_errors.db_name is defined %}is-invalid{% endif %}" id="db-name" name="db_name" required>
                    {% include 'components/validation.html.twig' with {'validate': 'db_name'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="db-username" class="col-sm-4 col-form-label">Username</label>
                <div class="col-sm-8">
                    <input type="input" class="form-control {% if validation_errors.db_username is defined %}is-invalid{% endif %}" id="db-username" name="db_username" required>
                    {% include 'components/validation.html.twig' with {'validate': 'db_username'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="db-password" class="col-sm-4 col-form-label">Password</label>
                <div class="col-sm-8">
                    <input type="input" class="form-control {% if validation_errors.db_password is defined %}is-invalid{% endif %}" id="db-password" name="db_password" required>
                    {% include 'components/validation.html.twig' with {'validate': 'db_password'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="db-host" class="col-sm-4 col-form-label">Host</label>
                <div class="col-sm-8">
                    <input type="input" value="localhost" class="form-control {% if validation_errors.db_host is defined %}is-invalid{% endif %}" id="db-host" name="db_host" required>
                    {% include 'components/validation.html.twig' with {'validate': 'db_host'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="db-port" class="col-sm-4 col-form-label">Port</label>
                <div class="col-sm-8">
                    <input type="number" value="3306" class="form-control {% if validation_errors.db_port is defined %}is-invalid{% endif %}" id="db-port" name="db_port" required>
                    {% include 'components/validation.html.twig' with {'validate': 'db_port'} %}
                </div>
            </div>
            <div class="row mb-3">
                <label for="db-charset" class="col-sm-4 col-form-label">Charset</label>
                <div class="col-sm-8">
                    <input type="input" value="utf8mb4" class="form-control {% if validation_errors.db_charset is defined %}is-invalid{% endif %}" id="db-charset" name="db_charset" required>
                    {% include 'components/validation.html.twig' with {'validate': 'db_charset'} %}
                </div>
            </div>
            <div class="d-grid gap-2 mb-3">
                <button type="submit" class="btn btn-primary">Setup</button>
            </div>
        </form>
    </section>
{% endblock %}
